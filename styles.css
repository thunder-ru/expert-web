// Мобильное меню с анимацией и иконкой
const hamburger = document.getElementById('hamburger');
const nav = document.querySelector('.nav');

hamburger.addEventListener('click', () => {
  nav.classList.toggle('active');
  hamburger.classList.toggle('open');
});

// Плавный скролл + активный пункт меню
const sections = document.querySelectorAll('section');
const navLinks = document.querySelectorAll('.nav-list a');

window.addEventListener('scroll', () => {
  const header = document.querySelector('.header');
  if (window.scrollY > 50) {
    header.classList.add('scrolled');
  } else {
    header.classList.remove('scrolled');
  }

  let current = '';
  sections.forEach(section => {
    const sectionTop = section.offsetTop - 100;
    const sectionHeight = section.clientHeight;
    if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
      current = section.getAttribute('id');
    }
  });

  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === `#${current}`) {
      link.classList.add('active');
    }
  });
});

// Фильтрация портфолио — проекты видны сразу
const filterBtns = document.querySelectorAll('.filter-btn');
const portfolioItems = document.querySelectorAll('.portfolio-item');

window.addEventListener('load', () => {
  portfolioItems.forEach(item => {
    item.style.display = 'block';
    item.classList.add('loaded');
  });
});

filterBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    filterBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const filter = btn.getAttribute('data-filter');
    portfolioItems.forEach(item => {
      if (filter === 'all' || item.getAttribute('data-category') === filter) {
        item.style.display = 'block';
        setTimeout(() => item.classList.add('loaded'), 50);
      } else {
        item.style.display = 'none';
        item.classList.remove('loaded');
      }
    });
  });
});

// Плавное появление
const animateOnScroll = () => {
  document.querySelectorAll('.about-text, .skills, .portfolio-subtitle, .testimonials, .contact-subtitle, .guarantees, .how-to-order').forEach(el => {
    const pos = el.getBoundingClientRect().top;
    if (pos < window.innerHeight - 100 && !el.classList.contains('animated')) {
      el.style.opacity = 0;
      el.style.transform = 'translateY(30px)';
      el.style.transition = 'all 0.8s ease';
      setTimeout(() => {
        el.style.opacity = 1;
        el.style.transform = 'translateY(0)';
        el.classList.add('animated');
      }, 100);
    }
  });
};

window.addEventListener('scroll', animateOnScroll);
window.addEventListener('load', animateOnScroll);

// Форма
document.getElementById('contactForm').addEventListener('submit', e => {
  e.preventDefault();
  alert('✅ Спасибо! Я свяжусь с тобой в течение 24 часов.');
  e.target.reset();
});
